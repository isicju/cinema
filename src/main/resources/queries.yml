getSessionsMoviesSeats: |
  SELECT
    sessions.session_id,
    sessions.session_date,
    sessions.session_time,
    movies.movie_id,
    movies.movie_title,
    ARRAY_AGG(tickets.seat_id) AS occupied_seats
  FROM
  sessions
  JOIN
  movies ON sessions.movie_id = movies.movie_id
  LEFT JOIN
  tickets ON sessions.session_id = tickets.session_id
  WHERE
  movies.showing = TRUE
  AND sessions.sold_out = FALSE
  GROUP BY
  sessions.session_id, sessions.session_date, sessions.session_time, movies.movie_id, movies.movie_title;

postUser: |
  INSERT INTO users (first_name, last_name, email)
  VALUES (:first_name, :last_name, :email)
  ON CONFLICT (email) DO UPDATE SET email = excluded.email
  RETURNING user_id;

postTicket: |
  INSERT INTO tickets (session_id, seat_id, user_id)
  VALUES (:session_id, :seat_id, :user_id)
  RETURNING ticket_id;